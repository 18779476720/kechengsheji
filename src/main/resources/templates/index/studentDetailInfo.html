<!DOCTYPE html>
<!--[if lt IE 7]>

<html class="lt-ie9 lt-ie8 lt-ie7" lang="en">

<![endif]-->
<!--[if IE 7]>

<html class="lt-ie9 lt-ie8" lang="en">

<![endif]-->
<!--[if IE 8]>

<html class="lt-ie9" lang="en">

<![endif]-->
<!--[if gt IE 8]>
<!-->

<html lang="en">

<!--
<![endif]-->
<head>
  <meta charset="utf-8">
  <title>
    Blue Moon - Responsive Admin Dashboard
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">
  <!-- bootstrap css -->
  <script type="text/javascript" src="../../static/js/jquery.min.js"></script>
  <script type="text/javascript" src="../../static/js/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="../../static/js/jquery-1.9.1.min.js"></script>
  <script type="text/javascript" src="../../static/js/pagination.min.js"></script>
  <script type="text/javascript" src="../../static/js/toastr.min.js"></script>

  <link href="../../static/css/jqueryui.css" rel="stylesheet" type="text/css" />
  <!--<link href="../../static/js/bootstrap-3.3.7-dist/css/bootstrap.css" rel="stylesheet" type="text/css" />-->
  <link href="../../static/css/pagination.css" rel="stylesheet">
  <link href="../../static/icomoon/style.css" rel="stylesheet">
  <link href="../../static/css/toastr.css" rel="stylesheet" type="text/css"/>

  <!--[if lte IE 7]>
  <script src="../../static/css/icomoon-font/lte-ie7.js">
  </script>
  <![endif]-->
  <link href="../../static/css/wysiwyg/bootstrap-wysihtml5.css" rel="stylesheet">
  <link href="../../static/css/wysiwyg/wysiwyg-color.css" rel="stylesheet">
  <link href="../../static/css/main.css" rel="stylesheet"> <!-- Important. For Theming change primary-color variable in main.css  -->
  <link href="../../static/css/charts-graphs.css" rel="stylesheet">
</head>
<header style="background-image: url(../../static/images/jloginbg04.jpg);background-size:10000px 10000px">
  <a href="#" class="logo">
    <img src="../../static/images/jlogosmall.png" width="70" height="90" alt="logo"/>
    <span class="mini-title" style="display: inline-block;"><a id="mailbox" style="font-size:30px; line-height:70px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;欢迎登陆大学生兼职网</a></span>
  </a>
  <div class="btn-group" id = "welcomeLogin"></div>
  <script type="text/javascript" src="../../static/myJs/welcomeLogin.js"></script>
</header>
<body style="background-image: url(../../static/images/jloginbg04.jpg);">

<div class="container" style="margin-top: 70px">
  <div class="modal-dialog" style="min-width:80%;">
    <div class="modal-content" style="height:900px">
      <div class="modal-body" style="margin-top: 10px; min-height: 800px">
        <form class="form-horizontal" role="form" action="user/register"
              method="post" id="myForm">
          <div class="form-group"><br>
            <label for="recruitType" class="col-sm-3 control-label">&nbsp;兼职类型：&nbsp;&nbsp;&nbsp;&nbsp;</label>
            <div class="col-sm-9">
              <input type="text" class="form-control input-lg" name="recruitType" id="recruitType" readonly>
            </div>
          </div>
          <div class="form-group"><br>
            <label for="recruitNum" class="col-sm-3 control-label">&nbsp;招聘人数：&nbsp;&nbsp;&nbsp;&nbsp;</label>
            <div class="col-sm-9">
              <input type="text" class="form-control input-lg" name="recruitNum" id="recruitNum" readonly>
            </div>
          </div>
          <div class="form-group"><br>
            <label for="salaryDescription" class="col-sm-3 control-label">&nbsp;薪资描述：&nbsp;&nbsp;&nbsp;&nbsp;</label>
            <div class="col-sm-9">
              <input type="text" class="form-control input-lg" name="salaryDescription" id="salaryDescription" readonly>
            </div>
          </div>
          <div class="form-group"><br>
            <label for="taskDescription" class="col-sm-3 control-label">&nbsp;工作描述：&nbsp;&nbsp;&nbsp;&nbsp;</label>
            <div class="col-sm-6">
              <input type="text" class="form-control" name="taskDescription" id="taskDescription">
            </div>
          </div>
          <div class="form-group"><br>
            <label for="taskPlace" class="col-sm-3 control-label">&nbsp;工作地点：&nbsp;&nbsp;&nbsp;&nbsp;</label>
            <div class="col-sm-9">
              <input type="text" class="form-control input-lg" name="taskPlace" id="taskPlace" readonly>
            </div>
          </div>
          <div class="form-group"><br>
            <label for="contactNumber" class="col-sm-3 control-label">&nbsp;联系电话：&nbsp;&nbsp;&nbsp;&nbsp;</label>
            <div class="col-sm-9">
              <input type="text" class="form-control input-lg" name="contactNumber" id="contactNumber" readonly>
            </div>
          </div>
          <div class="form-group"><br>
            <label for="city" class="col-sm-3 control-label">&nbsp;工作城市：&nbsp;&nbsp;&nbsp;&nbsp;</label>
            <div class="col-sm-9">
              <input type="text" class="form-control input-lg" name="city" id="city" readonly>
            </div>
          </div>
          <div class="form-group"><br>
            <label for="businessName" class="col-sm-3 control-label">&nbsp;发布商家：&nbsp;&nbsp;&nbsp;&nbsp;</label>
            <div class="col-sm-9">
              <input type="text" class="form-control input-lg" name="businessName" id="businessName" readonly>
            </div>
          </div>
          <div class="form-group"><br>
            <label for="recruitStatus" class="col-sm-3 control-label">&nbsp;招聘状态：&nbsp;&nbsp;&nbsp;&nbsp;</label>
            <div class="col-sm-9">
              <input type="text" class="form-control input-lg" name="recruitStatus" id="recruitStatus" readonly>
            </div>
          </div>
          <div class="form-group"><br>
            <label for="createDate" class="col-sm-3 control-label">&nbsp;发布时间：&nbsp;&nbsp;&nbsp;&nbsp;</label>
            <div class="col-sm-9">
              <input type="text" class="form-control input-lg" name="createDate" id="createDate" readonly>
            </div>
          </div>
          <div class="form-group">
            <label for="id" class="col-sm-3 control-label"></label>
            <div class="col-sm-6">
              <input type="hidden" class="form-control" name="id" id="id">
            </div>
          </div>
          <div class="form-group"><br><br>
            <label for="" class="col-sm-3 control-label"></label>
            <div class="col-sm-8">
              <button type="button" class="btn btn-primary" onclick="save()">投递</button>
              <button type="button" class="btn btn-default" onclick="javascript:history.back(-1);">返回</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>


<script type="text/javascript">
    $("#welcomeLogin").load("jump?html_url=index/welcomeLogin")
    $(function(){
        loadData();
        welcomeLogin();
    });



    function loadData() {
        var detailId = '';
        var myurl=GetQueryString("html_url");
        if(myurl !=null && myurl.toString().length>1){
            detailId = GetQueryString("id");
        }
        //处理数据
        $.ajax({
            type: "GET",
            contentType: 'application/json',
            dataType: "json",
            url: "http://localhost:8088/recruitinfo/getByIdRecruitinfo?id=" + detailId,
            success: function (data){
                var business = JSON.parse(data.datas.businessinfoString);
                debugger
                if(data.code != 000001) {
                    toastr.error(data.message);
                    return false;
                }
                $("#recruitType").val(data.datas.recruitType);
                $("#recruitNum").val(data.datas.recruitNum);
                $("#salaryDescription").val(data.datas.salaryDescription);
                $("#taskDescription").val(data.datas.taskDescription);
                $("#taskPlace").val(data.datas.taskPlace);
                $("#contactNumber").val(data.datas.contactNumber);
                $("#city").val(data.datas.city);
                $("#businessName").val(business.businessName);
                $("#recruitStatus").val(data.datas.recruitStatus);
                $("#createDate").val(formatTime(data.datas.createDate));
            },
        });
    };

    //格式化日期
    function formatTime(date){
        var millis = new Date().getTime();
        var date1 = new Date(date);
        return date1.getFullYear() + '.' +
            ( ( date1.getMonth() + 1 ) < 10 ? '0' + ( date1.getMonth() + 1 ) : ( date1.getMonth() + 1 ) ) + '.' +
            ( date1.getDate() < 10 ? '0' + date1.getDate() : date1.getDate() );
    };
    //获取url参数
    function GetQueryString(name)
    {
        var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);//search,查询？后面的参数，并匹配正则
        if(r!=null)return  unescape(r[2]); return null;
    };

</script>
</body>
</html>