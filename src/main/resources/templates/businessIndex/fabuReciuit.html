<!DOCTYPE html>
<html>
<head>
    <title>User</title>
    <script type="text/javascript" src="../../static/js/jquery.min.js"></script>
    <script type="text/javascript" src="../../static/js/public.js"></script>
    <script type="text/javascript" src="../../static/js/checkbox.js"></script>
    <script type="text/javascript" src="../../static/page1.js"></script>
    <script type="text/javascript" src="../../static/js/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../static/js/jquery.SuperSlide.js"></script>
    <script type="text/javascript" src="../../static/js/bootstrap-3.3.7-dist/bootstrapValidator.js"></script>
    <script type="text/javascript" src="../../static/js/jquery-form-v3.51.0.min.js"></script>
    <script type="text/javascript" src="../../static/js/bootstrap-datetimepicker.min.js"></script>
    <script type="text/javascript" src="../../static/js/locales/bootstrap-datetimepicker.fr.js" charset="UTF-8"></script>
    <script type="text/javascript" src="../../static/js/toastr.min.js"></script>
    <link href="../../static/css/jqueryui.css" rel="stylesheet" type="text/css" />
    <link href="../../static/css/vjpublic.css" rel="stylesheet" type="text/css" />
    <link href="../../static/css/vjpage.css" rel="stylesheet" type="text/css" />
    <link href="../../static/css/config.css" rel="stylesheet" type="text/css" />
    <link href="../../static/js/bootstrap-3.3.7-dist/css/bootstrap.css" rel="stylesheet" type="text/css" />
    <link href="../../static/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="../../static/css/bootstrap-datetimepicker.min.css" rel="stylesheet" type="text/css" />
    <link href="../../static/css/toastr.css" rel="stylesheet" type="text/css"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body  class="body_style1" style="background-image: url(../../static/images/jloginbg04.jpg)">
<div class="container" style="margin-top: 20px">
    <div class="modal-dialog" style="min-width:60%">
        <div class="modal-content">
            <div class="modal-body">
                <form class="form-horizontal" role="form" action="user/register"
                      method="post" id="myForm">
                    <div class="form-group">
                        <label for="recruitType" class="col-sm-3 control-label"><i class="text-red" style="color: red">*&nbsp;</i>兼职类型：</label>
                        <div class="col-sm-6">
                            <input type="text" class="form-control input-lg" name="recruitType" id="recruitType"
                                   placeholder="请输入兼职类型">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="recruitNum" class="col-sm-3 control-label"><i class="text-red" style="color: red">*&nbsp;</i>招聘人数：</label>
                        <div class="col-sm-6">
                            <input type="text" class="form-control input-lg" name="recruitNum" id="recruitNum"
                                   placeholder="请输入招聘人数">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="salaryDescription" class="col-sm-3 control-label"><i class="text-red" style="color: red">*&nbsp;</i>薪资描述：</label>
                        <div class="col-sm-6">
                            <input type="text" class="form-control input-lg" name="salaryDescription" id="salaryDescription"
                                   placeholder="请输入薪资描述">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="taskDescription" class="col-sm-3 control-label"><i class="text-red" style="color: red">*&nbsp;</i>工作描述：</label>
                        <div class="col-sm-6">
                            <input type="text" class="form-control input-lg" name="taskDescription" id="taskDescription"
                                   placeholder="请输入工作描述">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="taskPlace" class="col-sm-3 control-label"><i class="text-red" style="color: red">*&nbsp;</i>工作地点：</label>
                        <div class="col-sm-6">
                            <input type="text" class="form-control input-lg" name="taskPlace" id="taskPlace"
                                   placeholder="请输入工作地点">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="contactNumber" class="col-sm-3 control-label"><i class="text-red" style="color: red">*&nbsp;</i>联系电话：</label>
                        <div class="col-sm-6">
                            <input type="text" class="form-control" name="contactNumber" id="contactNumber"
                                   placeholder="请输入phone">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="city" class="col-sm-3 control-label"><i class="text-red" style="color: red">*&nbsp;</i>工作城市：</label>
                        <div class="col-sm-6">
                            <input type="text" class="form-control" name="city" id="city"
                                   placeholder="请输入工作城市">
                        </div>
                    </div>

                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" onclick="javascript:history.back(-1);">取消</button>
                <button type="button" class="btn btn-primary" onclick="save()">发布</button>
            </div>
        </div>
    </div>

</div>
</body>

<script type="text/javascript">

    $(function(){
        $('.form_date').datetimepicker({
            language:  'fr',
            weekStart: 1,
            todayBtn:  1,
            autoclose: 1,
            todayHighlight: 1,
            startView: 2,
            minView: 2,
            forceParse: 0
        });
        $('#datetimepicker').datetimepicker();
    });
    //获取url参数
    function GetQueryString(name)
    {
        var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);//search,查询？后面的参数，并匹配正则
        if(r!=null)return  unescape(r[2]); return null;
    };
    //格式化日期
    function formatTime(date){
        var millis = new Date().getTime();
        var date1 = new Date(date);
        return date1.getFullYear() + '-' +
            ( ( date1.getMonth() + 1 ) < 10 ? '0' + ( date1.getMonth() + 1 ) : ( date1.getMonth() + 1 ) ) + '-' +
            ( date1.getDate() < 10 ? '0' + date1.getDate() : date1.getDate() );
    };

    function save() {
        debugger
        var recruitType = $("#recruitType").val();
        var recruitNum = $("#recruitNum").val();
        var salaryDescription = $("#salaryDescription").val();
        var taskDescription = $("#taskDescription").val();
        var taskPlace = $("#taskPlace").val();
        var contactNumber = $("#contactNumber").val();
        var city = $("#city").val();

        if(recruitType == "" || recruitType == undefined){
            toastr.error('兼职类型不能为空');
            return false;
        }else if(recruitNum == "" || recruitNum == undefined){
            toastr.error('招聘人数不能为空');
            return false;
        }else if(salaryDescription == "" || salaryDescription == undefined){
            toastr.error('薪资描述不能为空');
            return false;
        }else if(taskDescription == "" && taskDescription == undefined){
            toastr.error('兼职描述不能为空');
            return false;
        }else if(taskPlace == "" || taskPlace == undefined){
            toastr.error('工作地点不能为空');
            return false;
        }
        else if(contactNumber == "" || contactNumber == undefined){
            toastr.error('联系电话不能为空');
            return false;
        }else if(city == "" || city == undefined){
            toastr.error('工作城市不能为空');
            return false;
        }
        var recruit = {
            recruitType: recruitType,
            recruitNum: recruitNum,
            salaryDescription: salaryDescription,
            taskDescription: taskDescription,
            taskPlace: taskPlace,
            contactNumber:contactNumber,
            city: city
        }

        $.ajax({
            type: "POST",
            contentType: 'application/json',
            dataType: "json",
            url: "http://localhost:8088/recruitinfo/insertRecruitinfo",
            data: JSON.stringify(recruit),
            success: function (data){
                if(data.code != "000001" ){
                    toastr.error("发布失败，将自动刷新界面！");
                    setTimeout(function () {
                        window.location.href = "/public/util/jump?html_url=businessIndex/businessIndex";
                    }, 3000);
                }
                else{
                    toastr.success("发布成功！");
                    setTimeout(function () {
                        window.location.href = "/public/util/jump?html_url=businessIndex/businessIndex";
                    }, 3000);
                }
            },
        });
    }
</script>
</html>

