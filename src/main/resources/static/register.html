<!DOCTYPE html>
<html>
<head>
<title>User</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link href="http://fonts.googleapis.com/icon?family=Material+Icons"
	rel="stylesheet">
<link rel="stylesheet" href=" css/bootstrap.min.css">
<link rel="stylesheet" href="css/bootstrap-table.min.css">
</head>

<body background="images/jloginbg04.jpg">
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/bootstrap/bootstrap.min.js"></script>
	<script type="text/javascript"
		src="js/bootstrap/bootstrap-table.min.js"></script>
	<script type="text/javascript"
		src="js/bootstrap/bootstrap-table-zh-CN.js"></script>
	<div class="container" style="margin-top: 20px">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-body">
					<form class="form-horizontal" role="form" action="user/register"
						method="post" id="myForm">
						<div class="form-group">
							<label for="name" class="col-sm-3 control-label">用户名：</label>
							<div class="col-sm-9">
								<input type="text" class="form-control" name="name" id="name"
									placeholder="请输入用户名">
							</div>
						</div>
						<div class="form-group">
							<label for="password" class="col-sm-3 control-label">密码：</label>
							<div class="col-sm-9">
								<input type="password" class="form-control" name="password"
									id="password" placeholder="请输入密码">
							</div>
						</div>
						<div class="form-group">
							<label for="password" class="col-sm-3 control-label">确认密码：</label>
							<div class="col-sm-9">
								<input type="password" class="form-control" name="conpassword"
									id="conpassword" placeholder="请输入确认密码">
							</div>
						</div>
						<div class="form-group">
							<label for="type" class="col-sm-3 control-label">类型：</label>
							<div class="col-sm-9">
								<input type="text" class="form-control" name="type" id="type"
									placeholder="请输入type">
							</div>
						</div>
						<div class="form-group">
							<label for="phone" class="col-sm-3 control-label">phone：</label>
							<div class="col-sm-9">
								<input type="text" class="form-control" name="phone" id="phone"
									placeholder="请输入phone">
							</div>
						</div>
						<div class="form-group">
							<label for="email" class="col-sm-3 control-label">email：</label>
							<div class="col-sm-9">
								<input type="text" class="form-control" name="email" id="email"
									placeholder="请输入email">
							</div>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" onclick="cancle()">取消</button>
					<button type="button" class="btn btn-primary" onclick="save()">注册</button>
				</div>
			</div>
		</div>

	</div>
</body>

<script type="text/javascript">
	function cancle() {
		window.location.href = "login.html";
	}
	function save() {
		if ($("#password").val() != "") {
			debugger;
			//将数据转化成json
			var arr = {
				"name" : $('#name').val(),
				"password" : $('#password').val(),
				"type" : $('#type').val(),
				"phone" : $('#phone').val(),
				"email" : $('#email').val()
			};
			var data = JSON.stringify($('form').serializeObject());
			$.ajax({
				type : "POST",
				contentType : 'application/json',
				dataType : "json",
				url : "user/register",
				data : JSON.stringify(arr),
				success : function(result) {
					
					cancle();
				}

			});
		} else {
			alert("密码不正确！" + $("#conpassword").val());
		}

	}

	//定义serializeObject方法，序列化表单
	$.fn.serializeObject = function() {
		var o = {};
		var a = this.serializeArray();
		$.each(a, function() {
			if (o[this.name]) {
				if (!o[this.name].push) {
					o[this.name] = [ o[this.name] ];
				}
				o[this.name].push(this.value || '');
			} else {
				o[this.name] = this.value || '';
			}
		});
		return o;
	};
</script>
</html>

